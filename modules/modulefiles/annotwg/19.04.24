#%Module1.0
# Module settings for annotWG
# Software description for annotWG
module-whatis   "annotwg"
set software    "annotwg"
set description "annotWG"
set html        ""
set license     ""
set scope       "ig"
set appnameup   "ANNOTWG"

set version     [file tail [info script]]

# versions of dependencies
set samvers  "1.9"

# Conflict
conflict        "$software"

# Find appropriate product installation
set here [file dirname [info script]]

if { [string index $here 0] != "/" } {
    set errorInfo "+(0):ERROR:0: Use an absolute path with 'module use'."
    reportError $errorInfo
    exit 1
}

if {[info exists env(OWN_PRODUCTSHOME)] && [file isdirectory "$env(OWN_PRODUCTSHOME)/$software-$version"]} {
    set prefix "$env(OWN_PRODUCTSHOME)/$software-$version"
} else {
    set errorInfo "+(0):ERROR:0: Unable to locate your $software-$version installation on this system."
    reportError $errorInfo
    exit 1
}

# Dependencies
#prereq zlib/best #prereq and alias does not work
module load zlib/best
prereq samtools/$samvers
prereq bcftools/$samvers

# Load software environment
if {[file isdirectory "$prefix/script"]} {
    set exedir "$prefix/script"
} else {
    set exedir "$prefix"
}

# application-specific variables

# Compilerwrappers-specific variables
# Environment variables
append-path   PATH            "$exedir"
setenv        ANNOTWG_VERSION "$version"
setenv        ANNOTWG_HOME    "$prefix"
setenv        ANNOTATION_37   "/env/cng/bigtmp/sandron/Annotation_TEST/biobank/by-soft/annotwg/hs37d5/hs37d5_all_chr_cadd-1.4.bcf"
setenv        ANNOTATION_38   "/env/cng/bigtmp/sandron/Annotation_TEST/biobank/by-soft/annotwg/hs38me/hs38me_all_chr_cadd-1.5.bcf"
setenv        DICT_37         "/env/ig/biobank/by-name/Homo_sapiens/hs37d5/hs37d5_all_chr.dict"
setenv        DICT_38         "/env/ig/biobank/by-name/Homo_sapiens/hs38me/hs38me_all_chr.dict"

# Load common functions and behavior
source $env(FG_MODULESHOME)/.common
